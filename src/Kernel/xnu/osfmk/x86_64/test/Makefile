# Makefile

# 编译器
CC = gcc

# 汇编器
AS = clang

# 编译选项
CFLAGS = -g -Wall

# 汇编选项
ASFLAGS = -c -D__ASSEMBLER__ -DASSEMBLER   -arch x86_64 -Dx86_64 -DX86_64 -D__X86_64__ -DLP64 -DPAGE_SIZE_FIXED -mkernel -msoft-float -DKERNEL_BASE_OFFSET=0x100000  -mmacosx-version-min=11.0 -DXNU_TARGET_OS_OSX -DPLATFORM_MacOSX -DAPPLE -DKERNEL -DKERNEL_PRIVATE -DXNU_KERNEL_PRIVATE -DPRIVATE -D__MACHO__=1 -Dvolatile=__volatile -DXNU_KERN_EVENT_DATA_IS_VLA -DINET -DMACH -DMACH_COMPAT -DMACH_FASTLINK -DNO_DIRECT_RPC -DVLAN -DBOND -DIF_FAKE -DAH_ALL_CRYPTO -DPF -DPFLOG -DDUMMYNET -DTRAFFIC_MGT -DMULTICAST -DICMP_BANDLIM -DIFNET_INPUT_SANITY_CHK -DMULTIPATH -DMPTCP -DSYSV_SEM -DSYSV_MSG -DSYSV_SHM -DPSYNCH -DFLOW_DIVERT -DNECP -DCONTENT_FILTER -DOLD_SEMWAIT_SIGNAL -DSOCKETS -DSENDFILE -DNETWORKING -DCONFIG_FSE -DCONFIG_IMAGEBOOT -DCONFIG_MBUF_JUMBO -DCONFIG_IMAGEBOOT_CHUNKLIST -DCONFIG_WORKQUEUE -DFIFO -DFDESC -DDEVFS -DNULLFS -DBINDFS -DFS_COMPRESSION -DCONFIG_DEV_KMEM -DQUOTA -DNAMEDSTREAMS -DCONFIG_APPLEDOUBLE -DCONFIG_VOLFS -DCONFIG_IMGSRC_ACCESS -DCONFIG_TRIGGERS -DCONFIG_EXT_RESOLVER -DCONFIG_SEARCHFS -DCONFIG_MNT_SUID -DCONFIG_MNT_ROOTSNAP -DCONFIG_ROSV_STARTUP -DCONFIG_FIRMLINKS -DCONFIG_MOUNT_VM -DCONFIG_MOUNT_PREBOOTRECOVERY -DCONFIG_DATALESS_FILES -DCONFIG_BASESYSTEMROOT -DNFSCLIENT -DNFSSERVER -DCONFIG_NFS_GSS -DCONFIG_NFS4 -DCONFIG_NETBOOT -DIPSEC -DIPSEC_ESP -DCRYPTO_SHA2 -DCONFIG_IMG4 -DZLIB -DIF_BRIDGE -DCONFIG_KN_HASHSIZE="64" -DCONFIG_VNODES="263168" -DCONFIG_NC_HASH="4096" -DCONFIG_VFS_NAMES="4096" -DCONFIG_MAX_CLUSTERS="8" -DCONFIG_MIN_NBUF="256" -DCONFIG_MIN_NIOBUF="128" -DCONFIG_NMBCLUSTERS="((1024 * 512) / MCLBYTES)" -DCONFIG_TCBHASHSIZE="4096" -DCONFIG_ICMP_BANDLIM="250" -DCONFIG_AIO_MAX="90" -DCONFIG_AIO_PROCESS_MAX="16" -DCONFIG_AIO_THREAD_COUNT="4" -DCONFIG_MAXVIFS="32" -DCONFIG_MFCTBLSIZ="256" -DCONFIG_MSG_BSIZE_REL="131072" -DCONFIG_MSG_BSIZE_DEV="131072" -DCONFIG_MSG_BSIZE="CONFIG_MSG_BSIZE_REL" -DCONFIG_IPC_TABLE_ENTRIES_STEPS="256" -DCONFIG_IPC_KERNEL_MAP_SIZE="64" -DCONFIG_VSPRINTF -DCONFIG_DYNAMIC_CODE_SIGNING -DCONFIG_CODE_DECRYPTION -DCONFIG_PROTECT -DCONFIG_KEYPAGE_WP -DCONFIG_MEMORYSTATUS -DCONFIG_DIRTYSTATUS_TRACKING -DCONFIG_PHYS_WRITE_ACCT -DVM_PRESSURE_EVENTS -DCONFIG_BACKGROUND_QUEUE -DCONFIG_IOSCHED -DCONFIG_TELEMETRY -DCONFIG_PROC_UUID_POLICY -DCONFIG_COREDUMP -DIOKITCPP -DIOKITSTATS -DCONFIG_SLEEP -DCONFIG_MAX_THREADS="500" -DLIBKERNCPP -DCONFIG_BLOCKS -DCONFIG_KEC_FIPS -DCONFIG_KEXT_BASEMENT -DCONFIG_PERSONAS -DCONFIG_MACF -DCONFIG_MACF_SOCKET_SUBSET -DCONFIG_AUDIT -DCONFIG_ARCADE -DCONFIG_SETUID -DCONFIG_KAS_INFO -DCONFIG_ZLEAKS -DKPERF -DKPC -DPGO -DMACH_BSD -DIOKIT -DCONFIG_THREAD_MAX="2560" -DCONFIG_TASK_MAX="1024" -DCONFIG_ZONE_MAP_MIN="120586240" -DCONFIG_ZLEAK_ALLOCATION_MAP_NUM="16384" -DCONFIG_ZLEAK_TRACE_MAP_NUM="8192" -DCONFIG_SCHED_TRADITIONAL -DCONFIG_SCHED_MULTIQ -DCONFIG_SCHED_TIMESHARE_CORE -DCONFIG_SCHED_SFI -DCONFIG_GZALLOC -DCONFIG_KDP_INTERACTIVE_DEBUGGING -DCONFIG_TASKWATCH -DCONFIG_USER_NOTIFICATION -DCONFIG_ATM -DCONFIG_COALITIONS -DCONFIG_SYSDIAGNOSE -DCONFIG_CSR -DSERIAL_CONSOLE -DVIDEO_CONSOLE -DCONFIG_REQUIRES_U32_MUNGING -DCOPYOUT_SHIM -DCONFIG_MACH_BRIDGE_SEND_TIME -DCONFIG_32BIT_TELEMETRY -DCONFIG_DELAY_IDLE_SLEEP -DCONFIG_PROC_UDATA_STORAGE -DPAL_I386 -DCONFIG_MCA -DCONFIG_VMX -DCONFIG_MTRR -DCONFIG_MACF_LAZY_VNODE_LABELS -DHYPERVISOR -DCONFIG_MACH_APPROXIMATE_TIME -URC_ENABLE_XNU_PRODUCT_INFO_FILTER -include meta_features.h -MD -MF start.d -MP  -I. -I/Users/lee/Desktop/Computer_Systems/Macos/PureDarwin/src/Kernel/xnu/osfmk -I/Users/lee/Desktop/Computer_Systems/Macos/PureDarwin/build/src/Kernel/xnu/xnu_build/src/xnu-build/EXPORT_HDRS/osfmk  -I/Users/lee/Desktop/Computer_Systems/Macos/PureDarwin/build/src/Kernel/xnu/xnu_build/src/xnu-build/EXPORT_HDRS/bsd  -I/Users/lee/Desktop/Computer_Systems/Macos/PureDarwin/build/src/Kernel/xnu/xnu_build/src/xnu-build/EXPORT_HDRS/libkern  -I/Users/lee/Desktop/Computer_Systems/Macos/PureDarwin/build/src/Kernel/xnu/xnu_build/src/xnu-build/EXPORT_HDRS/iokit  -I/Users/lee/Desktop/Computer_Systems/Macos/PureDarwin/build/src/Kernel/xnu/xnu_build/src/xnu-build/EXPORT_HDRS/pexpert  -I/Users/lee/Desktop/Computer_Systems/Macos/PureDarwin/build/src/Kernel/xnu/xnu_build/src/xnu-build/EXPORT_HDRS/libsa  -I/Users/lee/Desktop/Computer_Systems/Macos/PureDarwin/build/src/Kernel/xnu/xnu_build/src/xnu-build/EXPORT_HDRS/security  -I/Users/lee/Desktop/Computer_Systems/Macos/PureDarwin/build/src/Kernel/xnu/xnu_build/src/xnu-build/EXPORT_HDRS/san -I/Users/lee/Desktop/Computer_Systems/Macos/PureDarwin/src/Kernel/xnu/EXTERNAL_HEADERS -I/Users/lee/Desktop/Computer_Systems/Macos/PureDarwin/src/Libraries/libSystem/pthread/include -I/Users/lee/Desktop/Computer_Systems/Macos/PureDarwin/src/Kernel/xnu/osfmk/libsa -I/Users/lee/Desktop/Computer_Systems/Macos/PureDarwin/src/Kernel/libfirehose_kernel/include -I/Users/lee/Desktop/Computer_Systems/Macos/PureDarwin/src/Kernel/xnu/ -I/Users/lee/Desktop/Computer_Systems/Macos/PureDarwin/src/Kernel/xnu/kern/ -I/Users/lee/Desktop/Computer_Systems/Macos/PureDarwin/build/src/Kernel/xnu/xnu_build/src/xnu-build/RELEASE_X86_64/osfmk/RELEASE/

# 目标文件
OBJS = start.o

# 默认目标
all: main

# 生成可执行文件
main: $(OBJS)
	$(CC) $(CFLAGS) -o $@ $^

# 生成目标文件
%.o: %.s
	$(AS) $(ASFLAGS) -o $@ $<

# 清理生成的文件
clean:
	rm -f main $(OBJS)
